(window.webpackJsonpcryptodash=window.webpackJsonpcryptodash||[]).push([[0],{207:function(e,t,r){e.exports=r(305)},300:function(e,t,r){},305:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(15),i=r.n(c),o=r(31),s=r.n(o),l=r(169),u=r(38),f=r(67),d=r(136),m=r(170),p=r.n(m),b=r(176),h=r.n(b),j=r(186),O=r.n(j),E=r(177),k=r.n(E),g=r(184),y=r.n(g),v=r(135),w=r.n(v),P=r(134),x=r.n(P),S=r(178),I=r.n(S),R=r(179),D=r.n(R),T=r(181),C=r.n(T),N=r(182),L=r.n(N),U=r(183),A=r.n(U),Q=r(187),q=r.n(Q),J=r(180),$=r.n(J),F=r(185),B=r.n(F),M=r(188),V=r.n(M),G=r(160);r(300);function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}i.a.render(a.a.createElement((function(){var e=new AbortController,t={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},r={Add:Object(n.forwardRef)((function(e,t){return a.a.createElement(h.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return a.a.createElement(k.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return a.a.createElement(x.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return a.a.createElement(I.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return a.a.createElement(w.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return a.a.createElement(D.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return a.a.createElement($.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return a.a.createElement(C.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(L.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(A.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(w.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return a.a.createElement(y.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return a.a.createElement(x.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return a.a.createElement(B.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return a.a.createElement(O.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return a.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return a.a.createElement(V.a,Object.assign({},e,{ref:t}))}))},c=Object(n.useState)({tickers:[{}],tickerId:"",tickerName:"",tickerSymbol:"",tickerPrice:""}),i=Object(d.a)(c,2),o=i[0],l=i[1],m=Object(n.useState)({portfoliocolumns:[{title:"Trade time",field:"tradetime"},{title:"Name",field:"name"},{title:"Symbol",field:"symbol"},{title:"Position",field:"position"},{title:"Price at trade ($)",field:"tradePrice"},{title:"Active",field:"active"},{title:"Unrealised P&L  ($)",field:"pl"}],positionData:[{}],precision:2,portfolioId:0,portfolioUnrealisedPL:0,portfolioRealisedPL:0}),b=Object(d.a)(m,2),j=b[0],E=b[1],g=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n,a,c,i,f,d,m,p,b,h,j,O,E,k,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(o.tickers),n=[],e.next=4,fetch("/api/get?command=getTickers");case 4:return a=e.sent,e.next=7,a.json();case 7:if(c=e.sent,200===a.status){e.next=10;break}throw Error(c.message);case 10:for(i=!0,f=!1,d=void 0,e.prev=13,m=c[0].data[Symbol.iterator]();!(i=(p=m.next()).done);i=!0)b=p.value,n.push(b);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),f=!0,d=e.t0;case 21:e.prev=21,e.prev=22,i||null==m.return||m.return();case 24:if(e.prev=24,!f){e.next=27;break}throw d;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return r=n,h=Object(u.a)(o.tickerId),h=c[0].data[0].id.toString(),j=Object(u.a)(o.tickerSymbol),j=c[0].data[0].symbol,O=Object(u.a)(o.tickerName),O=c[0].data[0].name,E=Object(u.a)(o.tickerPrice),e.next=39,fetch("/api/get?command=getPrice&tickerId="+h);case 39:return k=e.sent,e.next=42,k.json();case 42:if(g=e.sent,200===k.status){e.next=47;break}throw Error(g.message);case 47:g.length>0&&(E=g[0].data[0].quote.USD.price.toString()),l(Z({},o,{tickers:r,tickerPrice:E,tickerId:h,tickerSymbol:j,tickerName:O}));case 49:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(s.a.mark((function e(r){var n,a,c,i,o,l,f,d,m,p,b,h,O,k,g,y,v,w,P;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(j.positionData),a=Object(u.a)(j.portfolioUnrealisedPL.toString()),c=Object(u.a)(j.portfolioRealisedPL.toString()),n=[],i=0,e.next=7,fetch("/api/get?command=getPortfolio&portfolio="+j.portfolioId);case 7:return o=e.sent,e.next=10,o.json();case 10:if(l=e.sent,200===o.status){e.next=15;break}throw Error(l.message);case 15:f=[],d=!0,m=!1,p=void 0,e.prev=19,b=l[0].positions[Symbol.iterator]();case 21:if(d=(h=b.next()).done){e.next=40;break}return O=h.value,k=void 0,g=0,e.next=26,fetch("/api/get?command=getPrice&tickerId="+O.currencyId);case 26:return y=e.sent,e.next=29,y.json();case 29:if(v=e.sent,200===y.status){e.next=34;break}throw Error(v.message);case 34:v.length>0&&(k=v[0].data[0].quote.USD.price.toString()),O.active&&(i+=(k-O.priceAtTrade)*O.positionQty,g=Math.round(100*((k-O.priceAtTrade)*O.positionQty+1e-5))/100),f.push({id:O._id,portfolioId:l[0].portfolioId,tradetime:new Date(O.DateTime).toLocaleTimeString("en-GB",t),currencyId:O.currencyId,name:O.name,symbol:O.symbol,position:O.positionQty,tradePrice:O.priceAtTrade,active:O.active.toString(),pl:g.toString()});case 37:d=!0,e.next=21;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(19),m=!0,p=e.t0;case 46:e.prev=46,e.prev=47,d||null==b.return||b.return();case 49:if(e.prev=49,!m){e.next=52;break}throw p;case 52:return e.finish(49);case 53:return e.finish(46);case 54:n=f,w=Math.round(100*(i+1e-5))/100,P=Math.round(100*(l[0].realisedPL+1e-5))/100,a=w.toFixed(j.precision).toString(),c=P.toFixed(j.precision).toString(),E(Z({},j,{positionData:n,portfolioUnrealisedPL:a,portfolioRealisedPL:c}));case 60:case"end":return e.stop()}}),e,null,[[19,42,46,54],[47,,49,53]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(),v();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return P(),function(){e.abort()}}),[]);var S=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n,a,c,i,f,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(u.a)(o.tickerId),r=t.target.value,n=o.tickers.find((function(e){return e.id==r})),a=Object(u.a)(o.tickerSymbol),a=n.symbol,c=Object(u.a)(o.tickerName),c=n.name,i=Object(u.a)(o.tickerPrice),e.next=10,fetch("/api/get?command=getPrice&tickerId="+r);case 10:return f=e.sent,e.next=13,f.json();case 13:if(d=e.sent,200===f.status){e.next=18;break}throw Error(d.message);case 18:d.length>0&&(i=d[0].data[0].quote.USD.price.toString(),l(Z({},o,{tickerId:r,tickerPrice:i,tickerName:c,tickerSymbol:a})));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=20;break}return(r=[]).push({portfolioId:j.portfolioId}),r.push({tradeDate:new Date}),r.push({positionQty:document.getElementById("positionQty").value}),r.push({tickerId:o.tickerId}),r.push({tickerName:o.tickerName}),r.push({tickerSymbol:o.tickerSymbol}),r.push({tickerPrice:o.tickerPrice}),e.next=11,fetch("/api/post?command=newPosition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:r})});case 11:return n=e.sent,e.next=14,n;case 14:if(a=e.sent,200===n.status){e.next=19;break}throw Error(a.message);case 19:v();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/get?command=cmcCache&file="+t.target.textContent);case 2:return r=e.sent,e.next=5,r.json();case 5:if(n=e.sent,200===r.status){e.next=10;break}throw Error(n.message);case 10:g(),l(Z({},o,{tickers:[]})),v();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(s.a.mark((function e(t){var r,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=14;break}return(r=[]).push({portfolioId:j.portfolioId}),e.next=5,fetch("/api/post?command=resetPortfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:r})});case 5:return n=e.sent,e.next=8,n;case 8:if(a=e.sent,200===n.status){e.next=13;break}throw Error(a.message);case 13:setTimeout((function(){v()}),250);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=o.tickers.map((function(e){return a.a.createElement("option",{value:e.id},e.name)}));return a.a.createElement("div",null,a.a.createElement("div",{className:"outerDiv"},a.a.createElement("div",{className:"leftDiv"},a.a.createElement("h2",null,"CryptoDash")),a.a.createElement("div",{className:"midDiv"},a.a.createElement("h4",null,"Unrealised P&L Total: ","$"+j.portfolioUnrealisedPL)),a.a.createElement("div",{className:"rightDiv"},a.a.createElement("h4",null,"Realised P&L Total: ","$"+j.portfolioRealisedPL))),a.a.createElement(p.a,{title:"Portfolio View",icons:r,columns:j.portfoliocolumns,data:j.positionData,editable:{onRowDelete:function(e){return new Promise((function(t){"true"===e.active?setTimeout((function(){fetch("/api/get?command=getPrice&tickerId="+e.currencyId,{}).then((function(e){return e.json()})).then((function(r){var n=[];n.push({portfolioId:e.portfolioId}),n.push({positionId:e.id}),n.push({realisedPL:(r[0].data[0].quote.USD.price-e.tradePrice)*e.position}),fetch("/api/post?command=exitPosition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:n})}).then((function(e){v(),t()}))}))}),250):(alert("You cannot exit a closed position."),t())}))}}}),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("h3",null,"Trade Entry"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Select currency"),a.a.createElement("td",null,a.a.createElement("select",{onChange:S},U))),a.a.createElement("tr",null,a.a.createElement("td",null,"Price of currency (","USD",")"),a.a.createElement("td",{id:"tickerPrice"},"$"+o.tickerPrice)),a.a.createElement("tr",null,a.a.createElement("td",null,"Position quantity"),a.a.createElement("td",null,a.a.createElement("input",{id:"positionQty",type:"text"}))),a.a.createElement("tr",null,a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement(G.a,{variant:"contained",color:"primary",onClick:R},"Trade"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("h3",null,"System Control"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reload cache from sandbox"),a.a.createElement("td",null,a.a.createElement(G.a,{variant:"contained",color:"primary",onClick:T},"coinmarketcap.json"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reload cache from pro"),a.a.createElement("td",null,a.a.createElement(G.a,{variant:"contained",color:"primary",onClick:T},"pro.coinmarketcap.json"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Reset portfolio"),a.a.createElement("td",null,a.a.createElement(G.a,{variant:"contained",color:"primary",onClick:N},"Zero positions"))))))}),null),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.bf9de0c6.chunk.js.map