(window.webpackJsonpcryptodash=window.webpackJsonpcryptodash||[]).push([[0],{207:function(e,t,r){e.exports=r(305)},300:function(e,t,r){},305:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(15),o=r.n(c),i=r(31),s=r.n(i),l=r(169),u=r(36),f=r(67),m=r(120),d=r(170),p=r.n(d),b=r(176),h=r.n(b),E=r(186),j=r.n(E),k=r(177),O=r.n(k),y=r(184),g=r.n(y),v=r(136),w=r.n(v),x=r(135),P=r.n(x),S=r(178),R=r.n(S),I=r(179),C=r.n(I),D=r(181),N=r.n(D),T=r(182),A=r.n(T),L=r(183),U=r.n(L),Q=r(187),q=r.n(Q),F=r(180),J=r.n(F),B=r(185),z=r.n(B),G=r(188),M=r.n(G),V=r(160);r(300);function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}o.a.render(n.a.createElement((function(){var e=new AbortController,t="https://3299ece3ccc74205b96d7e7881b7bb1e.vfs.cloud9.eu-west-1.amazonaws.com",r={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},c={Add:Object(a.forwardRef)((function(e,t){return n.a.createElement(h.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return n.a.createElement(O.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return n.a.createElement(P.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return n.a.createElement(R.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return n.a.createElement(w.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,t){return n.a.createElement(C.a,Object.assign({},e,{ref:t}))})),Export:Object(a.forwardRef)((function(e,t){return n.a.createElement(J.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return n.a.createElement(N.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(A.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(U.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(w.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return n.a.createElement(g.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return n.a.createElement(P.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return n.a.createElement(z.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return n.a.createElement(j.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return n.a.createElement(q.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return n.a.createElement(M.a,Object.assign({},e,{ref:t}))}))},o=Object(a.useState)({exchangeRates:[{rateName:"USD",rate:1,symbol:"$"},{rateName:"GBP",rate:.89,symbol:"\xa3"}],selectedExchangeRate:[{rateName:"USD",rate:1,symbol:"$"}]}),i=Object(m.a)(o,2),l=i[0],d=i[1],b=Object(a.useState)({tickers:[{}],tickerId:"",tickerName:"",tickerSymbol:"",tickerPrice:""}),E=Object(m.a)(b,2),k=E[0],y=E[1],v=Object(a.useState)({portfoliocolumns:[{title:"Trade time",field:"tradetime"},{title:"Name",field:"name"},{title:"Symbol",field:"symbol"},{title:"Position",field:"position"},{title:"Price at trade ("+l.selectedExchangeRate[0].symbol+")",field:"tradePrice"},{title:"Active",field:"active"},{title:"Unrealised P&L  ("+l.selectedExchangeRate[0].symbol+")",field:"pl"}],positionData:[{}],precision:2,portfolioId:0,portfolioUnrealisedPL:0,portfolioRealisedPL:0}),x=Object(m.a)(v,2),S=x[0],I=x[1],D=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c,o,i,l,f,m,d,p,b,h,E,j,O,g;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(k.tickers),n=[],e.next=4,fetch(t+"/api/getTickers?table=cmcCache");case 4:return c=e.sent,e.next=7,c.json();case 7:if(o=e.sent,200===c.status){e.next=10;break}throw Error(o.message);case 10:for(i=!0,l=!1,f=void 0,e.prev=13,m=o[Symbol.iterator]();!(i=(d=m.next()).done);i=!0)p=d.value,n.push(p);e.next=21;break;case 17:e.prev=17,e.t0=e.catch(13),l=!0,f=e.t0;case 21:e.prev=21,e.prev=22,i||null==m.return||m.return();case 24:if(e.prev=24,!l){e.next=27;break}throw f;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return a=n,b=Object(u.a)(k.tickerId),b=o[0].tickerId.toString(),h=Object(u.a)(k.tickerSymbol),h=o[0].tickerSymbol,E=Object(u.a)(k.tickerName),E=o[0].tickerName,j=Object(u.a)(k.tickerPrice.toString()),e.next=39,fetch(t+"/api/getPrice?table=cmcCache&tickerId="+b);case 39:return O=e.sent,e.next=42,O.json();case 42:if(g=e.sent,200===O.status){e.next=47;break}throw Error(g.message);case 47:j=g.Items[0].cmcCacheData.quote.USD.price.toString(),y(H({},k,{tickers:a,tickerPrice:j,tickerId:b,tickerSymbol:h,tickerName:E}));case 49:case"end":return e.stop()}}),e,null,[[13,17,21,29],[22,,24,28]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(f.a)(s.a.mark((function e(a){var n,c,o,i,f,m,d,p,b,h,E,j,k,O,y,g,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(u.a)(S.positionData),c=Object(u.a)(S.portfolioUnrealisedPL.toString()),o=Object(u.a)(S.portfolioRealisedPL.toString()),n=[],i=0,e.next=7,fetch(t+"/api/getPortfolio?table=portfolios&portfolioId="+S.portfolioId);case 7:return f=e.sent,e.next=10,f.json();case 10:if(m=e.sent,200===f.status){e.next=15;break}throw Error(m.message);case 15:d=[],p=!0,b=!1,h=void 0,e.prev=19,E=m.Items[0].positions[Symbol.iterator]();case 21:if(p=(j=E.next()).done){e.next=40;break}return k=j.value,O=void 0,y=0,e.next=26,fetch(t+"/api/getPrice?table=cmcCache&tickerId="+k.currencyId);case 26:return g=e.sent,e.next=29,g.json();case 29:if(v=e.sent,200===g.status){e.next=34;break}throw Error(v.message);case 34:O=v.Items[0].cmcCacheData.quote.USD.price.toString(),k.active&&(i+=(O-k.priceAtTrade)*k.positionQty,y=(O-k.priceAtTrade)*k.positionQty),d.push({id:k._id,portfolioId:m.Items[0].portfolioId,tradetime:new Date(k.DateTime).toLocaleTimeString("en-GB",r),currencyId:k.currencyId,name:k.name,symbol:k.symbol,position:k.positionQty,tradePrice:k.priceAtTrade*l.selectedExchangeRate[0].rate,active:k.active.toString(),pl:(y*l.selectedExchangeRate[0].rate).toFixed(S.precision)});case 37:p=!0,e.next=21;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(19),b=!0,h=e.t0;case 46:e.prev=46,e.prev=47,p||null==E.return||E.return();case 49:if(e.prev=49,!b){e.next=52;break}throw h;case 52:return e.finish(49);case 53:return e.finish(46);case 54:n=d,c=i,o=m.Items[0].realisedPL,I(H({},S,{positionData:n,portfolioUnrealisedPL:c,portfolioRealisedPL:o}));case 58:case"end":return e.stop()}}),e,null,[[19,42,46,54],[47,,49,53]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D(),T();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return L(),function(){e.abort()}}),[]);var Q=function(e,t,r){for(var a=[],n=0;n<e.length;n++)e[n][r]==parseInt(t)&&a.push(e[n]);return a},F=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c,o,i,l,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(u.a)(k.tickerId),a=r.target.value,n=Q(k.tickers,a,"tickerId"),c=Object(u.a)(k.tickerSymbol),c=n[0].tickerSymbol,o=Object(u.a)(k.tickerName),o=n[0].tickerName,i=Object(u.a)(k.tickerPrice.toString()),e.next=10,fetch(t+"/api/getPrice?table=cmcCache&tickerId="+a);case 10:return l=e.sent,e.next=13,l.json();case 13:if(f=e.sent,200===l.status){e.next=18;break}throw Error(f.message);case 18:i=f.Items[0].cmcCacheData.quote.USD.price,y(H({},k,{tickerId:a,tickerPrice:i,tickerName:o,tickerSymbol:c}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=20;break}return(a=[]).push({portfolioId:S.portfolioId}),a.push({tradeDate:new Date}),a.push({positionQty:document.getElementById("positionQty").value}),a.push({tickerId:k.tickerId}),a.push({tickerName:k.tickerName}),a.push({tickerSymbol:k.tickerSymbol}),a.push({tickerPrice:k.tickerPrice}),e.next=11,fetch(t+"/api/postNewPosition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:a})});case 11:return n=e.sent,e.next=14,n;case 14:if(c=e.sent,200===n.status){e.next=19;break}throw Error(c.message);case 19:T();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t+"/api/getCMCCache?file="+r.target.textContent);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=10;break}throw Error(n.message);case 10:D(),y(H({},k,{tickers:[]})),T();case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(f.a)(s.a.mark((function e(r){var a,n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=14;break}return(a=[]).push({portfolioId:S.portfolioId}),e.next=5,fetch(t+"/api/resetPortfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:a})});case 5:return n=e.sent,e.next=8,n;case 8:if(c=e.sent,200===n.status){e.next=13;break}throw Error(c.message);case 13:setTimeout((function(){T()}),250);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=k.tickers.map((function(e){return n.a.createElement("option",{value:e.tickerId},e.tickerName)})),Z=l.exchangeRates.map((function(e){return n.a.createElement("option",{value:e.rateName},e.rateName)}));return n.a.createElement("div",null,n.a.createElement("div",{className:"outerDiv"},n.a.createElement("div",{className:"leftDiv"},n.a.createElement("h2",null,"CryptoDash")),n.a.createElement("div",{className:"midDiv"},n.a.createElement("h4",null,"Unrealised P&L Total: ",l.selectedExchangeRate[0].symbol+""+(S.portfolioUnrealisedPL*l.selectedExchangeRate[0].rate).toFixed(S.precision))),n.a.createElement("div",{className:"rightDiv"},n.a.createElement("h4",null,"Realised P&L Total: ",l.selectedExchangeRate[0].symbol+""+(S.portfolioRealisedPL*l.selectedExchangeRate[0].rate).toFixed(S.precision)))),n.a.createElement(p.a,{title:"Portfolio View",icons:c,columns:S.portfoliocolumns,data:S.positionData,editable:{onRowDelete:function(e){return new Promise((function(r){"true"===e.active?setTimeout((function(){fetch(t+"/api/getPrice?table=cmcCache&tickerId="+e.currencyId,{}).then((function(e){return e.json()})).then((function(a){var n=[];n.push({portfolioId:e.portfolioId}),n.push({table:"portfolios"}),n.push({positionId:e.id}),n.push({realisedPL:(a.Items[0].cmcCacheData.quote.USD.price-e.tradePrice)*e.position}),fetch(t+"/api/exitPosition",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Headers":"Content-Type, Authorization"},body:JSON.stringify({post:n})}).then((function(e){T(),r()}))}))}),250):(alert("You cannot exit a closed position."),r())}))}}}),n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h3",null,"Trade Entry"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Select currency"),n.a.createElement("td",null,n.a.createElement("select",{onChange:F},Y))),n.a.createElement("tr",null,n.a.createElement("td",null,"Price of currency"),n.a.createElement("td",{id:"tickerPrice"},l.selectedExchangeRate[0].symbol+""+k.tickerPrice*l.selectedExchangeRate[0].rate)),n.a.createElement("tr",null,n.a.createElement("td",null,"Position quantity"),n.a.createElement("td",null,n.a.createElement("input",{id:"positionQty",type:"text"}))),n.a.createElement("tr",null,n.a.createElement("td",null),n.a.createElement("td",null,n.a.createElement(V.a,{variant:"contained",color:"primary",onClick:B},"Trade"))),n.a.createElement("tr",null,n.a.createElement("td",null,n.a.createElement("h3",null,"System Control"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Reload cache from sandbox"),n.a.createElement("td",null,n.a.createElement(V.a,{variant:"contained",color:"primary",onClick:G},"coinmarketcap.json"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Reload cache from pro"),n.a.createElement("td",null,n.a.createElement(V.a,{variant:"contained",color:"primary",onClick:G},"pro.coinmarketcap.json"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Reset portfolio"),n.a.createElement("td",null,n.a.createElement(V.a,{variant:"contained",color:"primary",onClick:$},"Zero positions"))),n.a.createElement("tr",null,n.a.createElement("td",null,"Currency to view (USD=",l.selectedExchangeRate[0].rate,")"),n.a.createElement("td",null,n.a.createElement("select",{onChange:function(e){var t=Object(u.a)(l.selectedExchangeRate),r=l.exchangeRates.find((function(t){return t.rateName==e.target.value}));(t=[]).push(r),d(H({},l,{selectedExchangeRate:t}))}},Z))))))}),null),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.3c020b26.chunk.js.map